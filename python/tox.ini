[tox]
envlist = py39, py310, py311, py312, py313
isolated_build = true
skip_missing_interpreters = true

[testenv]
description = Run tests with pytest
deps =
    pytest>=7.0
    pytest-cov
allowlist_externals =
    maturin
commands_pre =
    maturin develop --release
commands =
    pytest {posargs:tests/}

[testenv:lint]
description = Run linting checks
basepython = python3.12
deps =
    ruff>=0.8
    mypy>=1.0
commands =
    ruff check prompt_fencing/ tests/
    ruff format --check prompt_fencing/ tests/
    mypy prompt_fencing/

[testenv:format]
description = Format code
basepython = python3.12
deps =
    ruff>=0.8
commands =
    ruff format prompt_fencing/ tests/
    ruff check --fix prompt_fencing/ tests/
